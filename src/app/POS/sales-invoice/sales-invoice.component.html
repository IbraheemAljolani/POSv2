<!-- #HEADER -->
<div class="pos-container" style="overflow: hidden auto;">
    <header id="header">
        <span></span>
        <div class="col-sm-11" style="margin-top:-2px;">

            <!-- POS dropdown-menu-->
            <div class="parameter-context m-t-5">

                <div>POS</div>
                <div class="btn-trans" (click)="openPOSDialog()">
                    <img src="../assets/2084-512.webp" />
                    <div>
                        {{ userInfo?.SalesDivision?.DivisionPOSDescription ?
                        userInfo.SalesDivision.DivisionPOSDescription : '---' }}
                    </div>
                </div>

            </div>

            <!-- Customers dropdown-menu-->
            <div class="parameter-context m-l-20 m-t-5">

                <div>Customer</div>
                <div class="btn-trans" title="{{ userInfo?.DefaultCustomer?.CustID ? userInfo?.DefaultCustomer?.CustID : '---' }} - {{
                        userInfo?.DefaultCustomer?.CustomerDescription ? userInfo?.DefaultCustomer?.CustomerDescription :
                        '---'}}" (click)="openCustomerDialog()">
                    <img src="../assets/customer.svg" />
                    <div>
                        {{ userInfo?.DefaultCustomer?.CustID ? userInfo.DefaultCustomer.CustID : '---' }} - {{
                        userInfo?.DefaultCustomer?.CustomerDescription ? userInfo.DefaultCustomer.CustomerDescription :
                        '---'}}
                    </div>
                </div>

            </div>

            <!-- tables dropdown-menu-->
            <div class="parameter-context m-t-5 m-l-20" clickOutside (clickOutside)="clickedOutsideTable()">
                <div class="dropdown" style="position:relative">
                    <div>Table</div>
                    <div class="dropdown-toggle btn-trans" (click)="toggleDropdownVisible()" title="{{selectedTable}}">
                        <img src="../assets/branchtable32.png" />
                        <div>{{selectedTable}}</div>
                        <i class="fa fa-caret-down"></i>
                    </div>
                    <ul class="dropdown-content dropdown-menu  table-responsive custom-scroll mx-height-300"
                        [ngStyle]="{'display': isDropdownVisible ? 'block' : 'none'}">
                        <li *ngFor="let tbl of branchTables">
                            <a href="javascript:void(0);" (click)="setTable(tbl)">
                                {{tbl.ID}} - {{tbl.Description}}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- salesmen dropdown-menu-->
            <div class="parameter-context m-l-20 m-t-5">

                <div>Sales Man</div>
                <div class="btn-trans" title="6 - ibraheem">

                    <img src="../assets/anonymous.png" />
                    <div>6- ibraheem</div>

                    <img src="../assets/salesman32.png" />
                    <div>...</div>
                    <i class="fa fa-search border-left"></i>
                </div>

            </div>

            <!-- deliveryDate datepicker-->
            <div class="parameter-context m-l-20">

                <div>Delivery Date</div>
                <div class="btn-trans" (click)="deliveryDateDatepicker.open()">
                    <i class="fa fa-calendar-plus-o"></i>
                    <mat-datepicker #deliveryDateDatepicker></mat-datepicker>
                    <input [matDatepicker]="deliveryDateDatepicker" readonly placeholder="MM/dd/yyyy"
                        style="min-width:0;background:none;border:0; cursor:pointer;">
                </div>

            </div>

            <!-- deliveryDate Timeepicker-->
            <div class="parameter-context m-l-20">
                <div>Delivery Time</div>
                <div class="btn-trans">
                    <i class="fa fa-clock-o"></i>
                    <input style="border: 0; background: transparent; cursor: pointer;width:100%"
                        [ngxTimepicker]="deliveryTimePicker" placeholder="00:00 am" readonly>
                    <ngx-material-timepicker style="z-index:1000000 !important"
                        #deliveryTimePicker></ngx-material-timepicker>
                </div>
            </div>

            <!-- cash on delivery -->
            <div class="parameter-context m-t-5 m-l-20">

                <div title="Cash On Delivery">
                    COD
                </div>
                <div>
                    <input type="checkbox" />
                </div>
            </div>

            <!-- Direct print (without showing print pop window) -->
            <div class="parameter-context m-t-5 m-l-20">

                <div title="Direct Print">
                    DP
                </div>
                <div>
                    <input type="checkbox" />
                </div>
            </div>

        </div>

        <!-- pulled right: nav area -->
        <div class="pull-right">

            <!-- logout button -->
            <div id="logout" class="btn-header transparent pull-right visible-xs">
                <span>
                    <a href="javascript:void(0)" title="Sign Out" data-action="userLogout"
                        data-logout-msg="You can improve your security further after logging out by closing this opened browser">
                        <i class="fa fa-sign-out"></i>
                    </a>
                </span>
            </div>
            <!-- end logout button -->
            <!-- fullscreen button -->
            <span id="fullscreen" class="btn-header transparent">
                <span>
                    <a href="javascript:void(0);" data-action="launchFullscreen" title="Full Screen">
                        <i class="fa fa-arrows-alt"></i>
                    </a>
                </span>
            </span>

            <span class="header-profile hidden-xs">
                <a href="javascript:void(0);" id="show-shortcut" class="dropdown-toggle" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <img src="../assets/anonymous.png" alt="me" />
                </a>
            </span>

        </div>
        <!-- end pulled right: nav area -->

    </header>
    <!-- END HEADER -->
    <!-- #NAVIGATION -->
    <!-- END NAVIGATION -->
    <!-- #MAIN PANEL -->
    <div class="pos-body">
        <div class="side-list">
            <ul>
                <li [class.active]="activeInvoiceTab === 'invoice'" (click)="goTab('invoice')">
                    <a data-toggle="tab" class="pointer" title="Invoice">
                        <i class="fa fa-file"></i>
                        <br />
                        <span class="hidden-sm hidden-xs">
                            Invoice
                        </span>
                    </a>
                </li>
                <li [class.active]="activeInvoiceTab === 'promo'" (click)="goTab('promo')">
                    <a data-toggle="tab" class="pointer" title="Promotion">
                        <i class="fa fa-snowflake-o"></i>
                        <br />
                        <span class="hidden-sm hidden-xs">
                            Promo
                        </span>
                    </a>
                </li>
                <li [class.active]="activeInvoiceTab === 'cash'" (click)="goTab('cash')">
                    <a data-toggle="tab" class="pointer" title="Cash">
                        <i class="fa fa-money"></i>
                        <br />
                        <span class="hidden-sm hidden-xs">
                            Billing
                        </span>
                    </a>
                </li>
                <li [class.active]="activeInvoiceTab === 'recall'" (click)="goTab('recall')">
                    <a data-toggle="tab" class="pointer" title="ReCall">
                        <i class="fa fa-share"></i>
                        <br />
                        <span class="hidden-sm hidden-xs">
                            Recall
                        </span>
                    </a>
                </li>
            </ul>
        </div>
        <div role="main" style="height:100%;flex:1;">

            <!-- RIBBON --> <!--//emad-->
            <div id="ribbon" class="ribbon-inside">
                <div class="m-t-5" style="font-size:12px">

                    <span>
                        <strong>
                            Division:
                        </strong>
                        <span>Amman Division</span>
                    </span>
                    <span>
                        <strong>
                            Site:
                        </strong>
                        <span>Riyadh</span>
                    </span>
                    <span>
                        <strong>
                            Store:
                        </strong>
                        <span>NakhelMall</span>
                    </span>
                    <span>
                        <strong>
                            Cashier:
                        </strong>
                        <span>Talal Younes Cashier</span>
                    </span>

                </div>
            </div>
            <!-- END RIBBON -->

            <div id="pos-content">
                <div class="row">
                    <div class="col-sm-5 pos-content-left">
                        <div class="trio-window trio-window-color-blue">
                            <header>

                                <h3>
                                    <span style="white-space:nowrap" *ngIf="selectedInvoice">
                                        <span class="hidden-sm hidden-xs">Invoice</span>
                                        {{selectedInvoice.ID}}
                                        <!-- <strong>(orderNumber number)</strong> -->
                                    </span>

                                    <span *ngIf="!selectedInvoice" style="color:#ddd">No Invoice</span>

                                </h3>

                                <div class="trio-window-ctrls">
                                    <!-- <a class="button-icon pointer" title="Save (Ctrl + s)" aria-label="Save">
                                        <i class="fa fa-save invoice-icon" aria-hidden="true"></i>
                                    </a> -->
                                    <a class="button-icon pointer" title="Print" aria-label="Print">
                                        <i class="fa fa-print invoice-icon" aria-hidden="true"></i>
                                    </a>
                                    <a class="button-icon pointer" title="Void (Shift + v)" aria-label="Void">
                                        <i class="fa fa-window-close-o txt-color-dangerLight invoice-icon"
                                            aria-hidden="true"></i>
                                    </a>
                                    <a (click)="newInvoice()" class="button-icon pointer" title="New (Ctrl + i)"
                                        aria-label="New">
                                        <i class="fa fa-plus invoice-icon" aria-hidden="true"></i>
                                    </a>
                                    <!-- <a class="button-icon pointer" title="Refresh" aria-label="Refresh">
                                        <i class="fa fa-refresh invoice-icon" aria-hidden="true"></i>
                                    </a> -->
                                </div>
                                <div class="widget-toolbar hidden-sm hidden-xs" role="menu" style="cursor:default">
                                    <div class="label" *ngIf="selectedInvoice"
                                        [ngStyle]="{'background-color': getColor(selectedInvoice.SalesInvoiceStatusID)}">
                                        {{selectedInvoice.SalesInvoiceStatusID}}
                                    </div>
                                </div>

                                <!-- <h3>Recall</h3> -->
                                <!-- <div class="trio-window-ctrls">
                                    <a class="button-icon pointer" title="Refresh" aria-label="Refresh">
                                        <i class="fa fa-refresh" aria-hidden="true"></i>
                                    </a>
                                </div> -->

                            </header>

                            <div class="column-flex full-flex" style="max-height: calc(100% - 34px);">
                                <div class="widget-body-toolbar"
                                    *ngIf="activeInvoiceTab !== 'recall' && selectedInvoice">
                                    <div class="text-muted">
                                        <small>Code: {{selectedInvoice.Code}}</small>

                                        <!-- <button class="btn btn-primary btn-xs m-l-10" style="margin-top: -2px"> Actions
                                            <span class="caret" aria-readonly="true">
                                            </span>
                                        </button> -->

                                        <small class="pull-right">{{selectedInvoice.SalesInvoiceDate | date:
                                            'MM-dd-yyyy'}}</small>
                                    </div>
                                </div>

                                <div class="widget-body no-padding column-flex"
                                    style="height:100%;height: calc(100% - 37px);">
                                    <div class="tab-content padding-10 column-flex full-flex">
                                        <!--Invoice-->
                                        <div class="tab-pane table-responsive custom-scroll"
                                            [ngClass]="{'active in':activeInvoiceTab === 'invoice'}">

                                            <div
                                                *ngFor="let product of selectedInvoiceProducts else let addToCartProduct of addToCart">
                                                <div class="s-item-list m-t-15" *ngIf="selectedInvoice">
                                                    <div class="p-5-10" (click)="openDetails()">
                                                        <strong>{{product.Description ? product.Description :
                                                            addToCartProduct.DescriptionEn}}</strong>

                                                        <div class="s-price-details">
                                                            <span class="s-price-details">

                                                                <button class="btn-flat" data-toggle="dropdown"
                                                                    [disabled]="doesInvoiceStatusDisallow()"
                                                                    (click)="increaseQty(product)">
                                                                    <i class="fa fa-plus txt-color-green"></i>
                                                                </button>

                                                                <button [disabled]="doesInvoiceStatusDisallow()"
                                                                    class="btn-flat" (click)="decreaseQty(product)">

                                                                    <i class="fa fa-minus txt-color-dangerLight"></i>
                                                                </button>

                                                                <input
                                                                    style='font-weight:bold; border-radius: 30px 0 0 30px;'
                                                                    class="input-left-rounded" [ngModel]="product.Qty"
                                                                    [disabled]="doesInvoiceStatusDisallow()"
                                                                    (keypress)="adjustInputWidth($event)"
                                                                    type="number" />

                                                                <button
                                                                    class="btn btn-xs width-40 disabled btn-default-gray"
                                                                    disabled>
                                                                    {{product.UOMDescription}}
                                                                </button>

                                                            </span>

                                                            <span class="pull-right bold m-t-5" title="Total Product">
                                                                {{product.NetTotalAfterTax}}
                                                                &nbsp;
                                                                {{product.CurrencyID}}
                                                            </span>

                                                        </div>
                                                        <div class="item-controls">
                                                            <a role="button" class="pointer" title="Remove"
                                                                *ngIf="selectedInvoice.SalesInvoiceStatusID == 'Created'"
                                                                aria-label="Remove">
                                                                <i class="fa fa-trash txt-color-dangerLight"
                                                                    aria-hidden="true"></i>
                                                            </a>


                                                            <a role="button" NgClass="pointer" class="pointer "
                                                                title="Show more" aria-label="Show more">
                                                                <i class="fa fa-arrows-alt txt-color-green"
                                                                    aria-hidden="true"></i>
                                                            </a>
                                                        </div>
                                                    </div>


                                                    <table class="table-condensed table-striped"
                                                        *ngIf="openProductDetails">
                                                        <!-- <tr>
                                                            <td>
                                                                Additions Amount
                                                            </td>
                                                            <td colspan="2"><i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                100 pice</td>
                                                        </tr> -->
                                                        <tr>
                                                            <td>Tax</td>
                                                            <td>
                                                                <i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                Amount: {{product.TaxAmount}}
                                                            </td>
                                                            <td>%</td>
                                                        </tr>

                                                        <tr>
                                                            <td>Promo</td>
                                                            <td>
                                                                <i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                ID: ---
                                                            </td>
                                                            <td>Discount: ---
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>Promo Notes</td>
                                                            <td colspan="2">
                                                                <i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                ---
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                Discount/Unit
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                <input type="number" class="input-rounded"
                                                                    [ngModel]="product.DiscountPercentage" />
                                                                <strong>%</strong>
                                                            </td>
                                                            <td>
                                                                <input type="number" class="input-rounded"
                                                                    [ngModel]="product.DiscountPerUnit" />
                                                                <strong>$</strong>
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>Total Discount</td>
                                                            <td>
                                                                <i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                {{product.TotalDiscount}}
                                                            </td>
                                                            <td></td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                Total Amount After Discount
                                                            </td>
                                                            <td colspan="2">
                                                                <i class="fa fa-caret-right m-r-5"
                                                                    aria-hidden="true"></i>
                                                                {{product.NetTotalAfterDiscount}}
                                                                &nbsp;
                                                                {{product.CurrencyID}}
                                                            </td>
                                                        </tr>

                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <!--promo-->
                                        <div class="tab-pane" [ngClass]="{'active in':activeInvoiceTab === 'promo'}">
                                            <div class="column-flex" *ngIf="selectedInvoice">
                                                <div>
                                                    <div class="p-5-10">
                                                        <label>
                                                            <input type="checkbox" class="checkbox style-0"
                                                                [(ngModel)]="promoSelectAllFlag"
                                                                (change)="promoSelectAll()">
                                                            <span>
                                                                <ng-container
                                                                    *ngIf="promoSelectAllFlag; else noSelectAll">
                                                                    Deselect All Promotions
                                                                </ng-container>
                                                                <ng-template #noSelectAll>
                                                                    Select All Promotions
                                                                </ng-template>
                                                            </span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="table-responsive custom-scroll full-flex">
                                                    <div class="s-item-list" *ngFor="let item of promosList">
                                                        <div class="p-5-10" (click)="expandArea(item)">
                                                            <label>
                                                                <input type="checkbox" class="checkbox style-0"
                                                                    [(ngModel)]="item.SelectFlag">
                                                                <span> {{item.ID}} - {{item.Description}}</span>
                                                            </label>

                                                            <div class="m-t-5 m-b-5">
                                                                <small class="text-muted">
                                                                    <strong>Type: </strong> {{item.ReferenceType}}
                                                                </small>

                                                                <span class="pull-right">
                                                                    Discount:
                                                                    <strong> ---</strong>
                                                                </span>
                                                            </div>

                                                            <div class="item-controls">
                                                                <a role="button" class="pointer" title="Show more"
                                                                    aria-label="Show more">
                                                                    <i class="fa fa-arrows-alt txt-color-green"></i>
                                                                </a>
                                                            </div>
                                                        </div>

                                                        <table class="table-condensed table-striped"
                                                            *ngIf="item.opened">
                                                            <tr>
                                                                <td>
                                                                    SalesInvoice
                                                                </td>
                                                                <td>{{ selectedInvoice.ID ? selectedInvoice.ID :
                                                                    '---'
                                                                    }}</td>
                                                                <td>
                                                                    <strong>PromotionID</strong>
                                                                </td>
                                                                <td>{{item.ID}}</td>
                                                            </tr>

                                                            <tr>
                                                                <td>
                                                                    BenefitQty
                                                                </td>
                                                                <td> ---</td>
                                                                <td>
                                                                    <strong>Minimum Qty</strong>
                                                                </td>
                                                                <td> ---</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Note</td>
                                                                <td colspan="3"> ---</td>
                                                            </tr>

                                                        </table>
                                                    </div>

                                                    <div class="no-data" *ngIf="promosList.length === 0">No Data</div>
                                                </div>

                                            </div>
                                        </div>

                                        <!--Cash -->
                                        <div class="tab-pane" [ngClass]="{'active in':activeInvoiceTab === 'cash'}"
                                            style="max-height: 645px;">
                                            <div *ngIf="selectedInvoice">
                                                <div class="row"
                                                    style="display: flex; justify-content: center; padding: 0 40px;">
                                                    <table class=" col-lg-2  payment-methods-tbl" style="width: 0; ">
                                                        <tr>
                                                            <td *ngFor="let methods of receiptMethods">
                                                                <label role="button"
                                                                    (click)="collectMethodDetails(methods.MethodTypeID, methods.Description)">
                                                                    <img alt="MethodType"
                                                                        [src]="'data:image/jpeg;base64,' + methods.Image ? 'data:image/jpeg;base64,' + methods.Image : '../assets/customer.svg'" />
                                                                    <br />
                                                                    {{methods.Description}}
                                                                </label>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>

                                                <div class="text-center" *ngIf="receiptMethods.length == 0">No payment
                                                    methods are defined!</div>

                                                <div class="table-responsive custom-scroll">

                                                    <div class="s-item-list"
                                                        *ngFor="let item of selectedPayments;let first = first">
                                                        <div class="p-5-10" (click)="expandArea(item)">
                                                            <div class="input-group input-group-rounded"
                                                                title="{{(item.ReceiptMethodTypeID == 'Card')?'InvoiceID':(item.ReceiptMethodTypeID == 'Loyalty Card' || item.ReceiptMethodTypeID == 'Coupon')?'Card number':'Value'}}">
                                                                <ng-container
                                                                    *ngIf="item.ReceiptMethodTypeID == 'Cash'; else defaultPayments">
                                                                    <span class="input-group-addon"
                                                                        [ngSwitch]="item.ReceiptMethodTypeID">
                                                                        <i class="fa fa-money" aria-hidden="true"></i>
                                                                    </span>
                                                                    <input type="number" class="form-control" disabled
                                                                        [ngModel]="item.Amount" />
                                                                </ng-container>
                                                                <ng-template #defaultPayments>
                                                                    <span class="input-group-addon"
                                                                        [ngSwitch]="item.ReceiptMethodTypeID">
                                                                        <i class="fa fa-credit-card"
                                                                            aria-hidden="true"></i>
                                                                    </span>
                                                                    <input type="number" class="form-control" disabled
                                                                        [ngModel]="item.Amount" />
                                                                </ng-template>
                                                            </div>

                                                            <div class="m-t-10 m-b-5 m-l-5">
                                                                <small class="text-muted">
                                                                    <span>
                                                                        <strong>{{item.ReceiptMethodTypeID}}</strong>
                                                                    </span>
                                                                    -
                                                                    <span>{{item.invoiceDate |
                                                                        date: 'MM/dd/yyyy HH:mm'}}</span>
                                                                </small>

                                                            </div>
                                                        </div>
                                                        <div class="item-controls">
                                                            <a role="button" class="pointer m-r-15" title="Delete"
                                                                (click)="deleteCash(item)" aria-label="Delete"
                                                                *ngIf="!doesInvoiceStatusDisallow()">
                                                                <i class="fa fa-trash txt-color-dangerLight"></i>
                                                            </a>
                                                            <a role="button" class="pointer" title="Show more"
                                                                aria-label="Show more" (click)="expandArea(item)">
                                                                <i class="fa fa-arrows-alt txt-color-green"></i>
                                                            </a>
                                                        </div>
                                                        <table class="table-condensed table-striped"
                                                            *ngIf="item.opened && item.ReceiptMethodTypeID == 'Return Invoice'">
                                                            <tr>
                                                                <td>
                                                                    Invoice Amount
                                                                </td>
                                                                <td colspan="2">
                                                                    <i class="fa fa-caret-right m-r-5"
                                                                        aria-hidden="true"></i>
                                                                    Amount value
                                                                </td>
                                                            </tr>

                                                            <tr>
                                                                <td>Amount</td>
                                                                <td>
                                                                    <i class="fa fa-caret-right m-r-5"
                                                                        aria-hidden="true"></i>
                                                                    Available: AvailableAmount value
                                                                </td>
                                                                <td>
                                                                    Returned: ReturnedAmount value
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <table class="table-condensed" *ngIf="item.opened"
                                                            style="background-color:#fafafa">
                                                            <tr>
                                                                <td>
                                                                    Description
                                                                </td>
                                                                <td colspan="2">
                                                                    <i class="fa fa-caret-right m-r-5"
                                                                        aria-hidden="true"></i>
                                                                    {{item.Description? item.Description : ''}}
                                                                </td>
                                                            </tr>

                                                            <tr>
                                                                <td colspan="3">
                                                                    <textarea class="inline-select"
                                                                        [(ngModel)]="item.Note" placeholder="Notes"
                                                                        style="height:50px;font-weight:normal">
                                                                                                            </textarea>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--recall-->
                                        <div class="tab-pane" style="height:calc(100% + 36px)"
                                            [ngClass]="{'active in':activeInvoiceTab === 'recall'}">

                                            <div class="column-flex">
                                                <div>
                                                    <div class="row m-b-15">
                                                        <div class="col-sm-6 m-t-5"
                                                            *ngIf="filterRecallSearch.includes('date')">
                                                            <div class="input-group input-group-sm">
                                                                <span class="input-group-addon">
                                                                </span>
                                                                <input type="text" style="cursor: not-allowed;" readonly
                                                                    [matDatepicker]="myDatepicker"
                                                                    placeholder="Search by Date"
                                                                    [(ngModel)]="datepicker"
                                                                    (ngModelChange)="changeDate($event)"
                                                                    class="form-control">
                                                                <span class="input-group-btn">
                                                                    <button class="btn btn-default-gray" type="button"
                                                                        (click)="myDatepicker.open();">
                                                                        <span class="fa fa-calendar fa-fw"></span>
                                                                    </button>
                                                                </span>
                                                                <mat-datepicker #myDatepicker></mat-datepicker>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-6 m-t-5">
                                                            <div class="input-group input-group-sm">
                                                                <input #searchInput type="text"
                                                                    placeholder="Search by ID/Text" class="form-control"
                                                                    (keyup.enter)="searchRecall(searchInput.value)">
                                                                <span class="input-group-btn">
                                                                    <button class="btn btn-success" type="button"
                                                                        (click)="searchRecall(searchInput.value)">Search!</button>
                                                                </span>
                                                            </div>
                                                        </div>

                                                        <div class="row filter-container">
                                                            <label *ngFor="let filter of filters"
                                                                [style.color]="filter.color" class="filter-label">
                                                                <input type="checkbox" class="checkbox style-0"
                                                                    [checked]="filter.checked"
                                                                    (change)="toggleFilter(filter)">
                                                                <span>{{ filter.label }}</span>
                                                            </label>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div style="overflow-y: scroll;">
                                                    <div class="custom-scroll full-flex"
                                                        *ngFor="let invoices of retailInvoices">
                                                        <div class="s-item-list">
                                                            <div class="p-5-10">
                                                                <i class="fa fa-stop fa-stop-style"
                                                                    [ngStyle]="{'color': getColor(invoices.SalesInvoiceStatusID)}"
                                                                    aria-hidden="true"></i>
                                                                <strong>{{invoices.ID}}</strong> -
                                                                {{invoices.CustDescription}}

                                                                <!-- <span title="Delivery Date" style="color: #96c7e7;">
                                                                <span>
                                                                    Delivery Date
                                                                </span>
                                                                05/09/2024
                                                            </span> -->
                                                                <div class="s-price-details">
                                                                    <small class="text-muted">
                                                                        <span class="input-rounded"
                                                                            title="Invoice Code">
                                                                            {{invoices.Code}}
                                                                        </span>
                                                                        -
                                                                        <span title="Invoice Date">
                                                                            {{ invoices.SalesInvoiceDate |
                                                                            date:'MM/dd/yyyy'
                                                                            }} </span>

                                                                    </small>

                                                                    <span class="pull-right bold m-t-5"
                                                                        title="Net Total After Tax">
                                                                        {{invoices.NetTotalAfterTax}}
                                                                        {{invoices.CurrencyID}}
                                                                    </span>

                                                                </div>
                                                            </div>
                                                            <div class="item-controls  m-t-5">
                                                                <a role="button" class="pointer" title="Open Invoice"
                                                                    aria-label="Open Invoice">
                                                                    <i class="fa fa-external-link txt-color-green fa-lg"
                                                                        (click)="invoiceDetails(invoices)"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--this tab will be shown  when no invoice-->
                                        <div *ngIf="!selectedInvoice && activeInvoiceTab !== 'recall'">
                                            <div class="text-center" style="position: relative; bottom: 300px;">
                                                <a role="button" class="btn btn-lg m-t-50" title="Ctrl + i"
                                                    (click)="newInvoice()">
                                                    <i class="fa fa-plus m-r-5"></i>
                                                    New Invoice
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="widget-footer" *ngIf="activeInvoiceTab !== 'recall' && selectedInvoice"
                                        style="margin-bottom:-13px">
                                        <div class="row">
                                            <div class="col-sm-3" style="z-index:2">
                                                <button type="button" *ngIf="activeInvoiceTab === 'invoice'"
                                                    class="btn btn-success m-t-10 m-l-5 pull-left" title="Ctrl + s"><i
                                                        class="fa fa-chevron-left m-r-5" aria-hidden="true"></i>
                                                    Check Out
                                                </button>

                                                <button type="button" *ngIf="activeInvoiceTab === 'promo'"
                                                    class="btn btn-success m-t-10 m-l-5 pull-left">
                                                    <i class="fa fa-chevron-left m-r-5" aria-hidden="true"></i>
                                                    Apply
                                                </button>

                                                <button type="button" *ngIf="activeInvoiceTab === 'promo'"
                                                    class="btn btn-danger m-t-10 m-l-5 pull-left">
                                                    <i class="fa fa-eraser m-r-5" aria-hidden="true"></i>
                                                    Clear
                                                </button>

                                                <button type="button" *ngIf="activeInvoiceTab === 'cash'"
                                                    class="btn btn-success m-t-10 m-l-5 pull-left" title="Ctrl + s">
                                                    <i class="fa fa-money m-r-5" aria-hidden="true"></i>
                                                    Done
                                                </button>
                                            </div>

                                            <div class="col-sm-9">
                                                <ul class="" id="sparks">
                                                    <li class="sparks-info">
                                                        <h5 style="margin:0;"> Net Total
                                                            <span class="txt-color-blue">
                                                                <i class="fa fa-money"></i>
                                                                &nbsp; {{selectedInvoice.NetTotalAfterTax}}
                                                            </span>
                                                        </h5>
                                                    </li>
                                                    <li class="sparks-info">
                                                        <h5 style="margin:0;">
                                                            Total Payment
                                                            <span class="txt-color-purple">
                                                                <i class="fa fa-check"></i>
                                                                &nbsp;0.000
                                                            </span>
                                                        </h5>

                                                    </li>
                                                    <li class="sparks-info">
                                                        <h5 style="margin:0;">
                                                            Remaining Total Amount
                                                            <span class="txt-color-greenDark">
                                                                <i class="fa fa-minus"></i>
                                                                &nbsp;{{selectedInvoice.NetTotalAfterTax ?
                                                                selectedInvoice.NetTotalAfterTax : 0.000}}
                                                            </span>
                                                        </h5>

                                                    </li>
                                                </ul>
                                            </div>
                                        </div>

                                        <div class="text-muted widget-footer-footer">
                                            <div class="row" style="font-size:14px;">
                                                <div class="col-sm-4">
                                                    <strong>
                                                        <input type="checkbox" style="margin-top:0" class="m-r-5" />
                                                        Service Charge
                                                    </strong>
                                                </div>
                                                <div class="col-sm-4 text-center">
                                                    <strong>Discount:</strong> {{selectedInvoice.DiscountTotal ?
                                                    selectedInvoice.DiscountTotal : 0.000}} $
                                                </div>
                                                <div class="col-sm-4 text-right">
                                                    <strong>TotalTax:</strong> {{selectedInvoice.TotalTax ?
                                                    selectedInvoice.TotalTax : 0.000}} $
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="visible-xs"><br /><br /></div>
                    <div class="col-sm-7 pos-content-right">
                        <div class="trio-window trio-window-color-blue">

                            <header>
                                <h3>Products
                                    <i class="fa fa-refresh m-l-5 fa-spin" aria-hidden="true" *ngIf="loading"></i>
                                </h3>
                                <div class="widget-toolbar smart-form" role="menu">
                                    <label class="input">
                                        <i class="icon-append fa fa-times-circle pointer" *ngIf="searchProduct"
                                            style="color:#000" (click)="searchProduct = ''"></i>
                                        <i class="icon-append fa fa-search border-left pointer" style="color:#000"
                                            *ngIf="!searchProduct"></i>

                                        <input type="text" placeholder="Search" [(ngModel)]="searchProduct"
                                            (keyup.enter)="searchProducts(searchProduct)" title="To focus: (Ctrl + f)">
                                    </label>
                                </div>
                            </header>

                            <div class="column-flex full-flex" style="max-height: calc(100% - 30px)">
                                <div class="row widget-body-toolbar p-t-10">
                                    <div class="col-lg-3 row-category-list" *ngFor="let categorie of categories">
                                        <button class="btn m-7 prod-desc-class"
                                            [ngClass]="{'btn-danger-light': categorie.CategoryID == selectedCategory}"
                                            (click)="getProducts(categorie.CategoryID)" style="width: 100%;">
                                            <img class="img-size" [alt]="categorie.Description"
                                                [src]="'data:image/jpeg;base64,' + categorie.Image" />
                                            {{ getDescription(categorie, 'DescriptionEn', 'DescriptionAr') }}

                                        </button>
                                    </div>
                                </div>

                                <div class="row overflow-class" *ngIf="!message">
                                    <div class="col-lg-6 " style="width: fit-content;"
                                        *ngFor="let product of (newProducts.length > 0 ? newProducts : products)"
                                        (click)="addItemOrGroup(product)">
                                        <div class="">
                                            <div class="list-item">
                                                <span class="prod-price">{{product.SalesPrice}} /
                                                    {{product.UOMDescription}}</span>
                                                <div class="prod-image">
                                                    <img [src]="product.Image" style="object-fit: cover;" alt="product"
                                                        width="100%" height="100%" />
                                                </div>
                                                <div style="display: flex;align-items: center;justify-content: center;">
                                                    <div class="prod-desc prod-desc-class"
                                                        title="{{product.DescriptionEn}}" aria-label="Details">
                                                        {{ getDescription(product, 'DescriptionEn', 'DescriptionAr') }}
                                                    </div>
                                                    <i class="fa fa-caret-down txt-color-dangerLight" title="Details"
                                                        aria-hidden="true"></i>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row overflow-class product-search-empty" *ngIf="message">
                                    <div class="col-lg-6 " style="width: fit-content;">
                                        <h1 style="color: red;">{{message}}</h1>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END #MAIN CONTENT -->

        </div>
        <!-- END #MAIN PANEL -->
    </div>
</div>